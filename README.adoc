= Development Environment
:toc:
:toclevels: 2
:source-highlighter: highlightjs

This repository contains _Terraform_ modules for deploying development resources into a _Dev Container_ https://minikube.sigs.k8s.io/[Minikube] _K8s_ cluster, with the https://minikube.sigs.k8s.io/docs/handbook/addons/gvisor/[gVisor] addon enabled and the https://gateway-api.sigs.k8s.io/[Gateway API] installed.

== Topics
_devcontainers_, _k8s_, _terraform_, _helm_, _kyverno_, _cert-manager_, _istio_, _kiali_, _argocd_, _gitea_, _prometheus_, _grafana_, _loki_, _tempo_

== Prerequisites
=== https://containers.dev/[Dev Containers]
- https://www.docker.com/[Docker]

- https://code.visualstudio.com/[Visual Studio Code]

- https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack[VS Code Remote Development Extension]

== Getting Started
Clone the repository and open it in _Dev Container_.

=== Port forwarding
[source,shell]
----
kubectl port-forward svc/gateway-istio 80:80
----

== Resources
- https://headlamp.dev/[Headlamp]

- https://kyverno.io/[Kyverno]

- https://istio.io/[Istio]

- https://kiali.io/[Kiali]

http://localhost/kiali/[http://localhost/kiali/]

- https://about.gitea.com/[Gitea]

http://localhost/gitea[http://localhost/gitea]

- https://argo-cd.readthedocs.io/en/stable/[ArgoCD]

http://localhost/argocd/[http://localhost/argocd/]

== Getting Started
[source,shell]
----
terraform init
----

[source,shell]
----
terraform apply
----

== Destroy
[source,shell]
----
terraform destroy
----

== Format
[source,shell]
----
tf fmt -recursive .
----

== Troubleshooting
- Use `kubectl explain` and `kubectl describe`
- More info with `-o wide` flag

== References
- https://artifacthub.io/[Artifact Hub]
- https://registry.terraform.io/[Terraform Registry]
- https://gvisor.dev/[gVisor]